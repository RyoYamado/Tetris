# –û—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ Tetris

## –ü—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –≤—ã–∑—ã–≤–∞–ª `document.getElementById()` –≤ —Ü–∏–∫–ª–∞—Ö, —á—Ç–æ –æ—á–µ–Ω—å –∑–∞—Ç—Ä–∞—Ç–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `CellCache` –≤ utils.js, –∫–æ—Ç–æ—Ä—ã–π –∫—ç—à–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ DOM —ç–ª–µ–º–µ–Ω—Ç—ã:
```javascript
export class CellCache {
    initMainBoard() { /* –∫—ç—à–∏—Ä—É–µ—Ç 200 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */ }
    getMainCell(x, y) { /* –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Map */ }
}
```

**–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** ~80% –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ –¥–æ—Å–∫–∏

---

### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ DOM** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –≠–ª–µ–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º –≤ —Ü–∏–∫–ª–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DocumentFragment` –¥–ª—è –±–∞—Ç—á-–æ–ø–µ—Ä–∞—Ü–∏–π:
```javascript
const fragment = document.createDocumentFragment();
// ... –¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ fragment
gameBoard.appendChild(fragment); // –æ–¥–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ!
```

**–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** ~95% –±—ã—Å—Ç—Ä–µ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å–∫–∏

---

### 3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ß–∏—Å–ª–∞ –≤—Ä–æ–¥–µ `1000`, `80`, `100`, `10` —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É.

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ utils.js:
```javascript
export const BASE_SPEED = 1000;
export const SPEED_INCREMENT = 80;
export const MIN_SPEED = 100;
export const LINES_PER_LEVEL = 10;
export const LINE_SCORES = [0, 40, 100, 300, 1200];
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** 
- –õ–µ–≥—á–µ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
- –°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
- –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫

---

### 4. **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** auth-page.js –∏ auth.js —Å–æ–¥–µ—Ä–∂–∞–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥.

**–†–µ—à–µ–Ω–∏–µ:** 
- auth-page.js —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç AuthManager
- –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (DRY –ø—Ä–∏–Ω—Ü–∏–ø)
- ~60% –º–µ–Ω—å—à–µ –∫–æ–¥–∞ –≤ auth-page.js

---

### 5. **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –ø–æ–≤—Ç–æ—Ä—è–ª `if (!this.gameActive || this.gamePaused) return;`

**–†–µ—à–µ–Ω–∏–µ:** 
```javascript
isGamePlayable() {
    return this.gameActive && !this.gamePaused;
}

// –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å:
if (!this.isGamePlayable()) return;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** DRY,Êòì—á–∏—Ç–∞–µ–º–æ, –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

---

### 6. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å —Å Firebase –∫–∞–∂–¥—ã–π —Ä–∞–∑.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 30 —Å–µ–∫—É–Ω–¥
const LEADERBOARD_UPDATE_INTERVAL = 30000;
if (cache && now - lastUpdate < interval) {
    return cache;
}
```

**–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 100% —ç–∫–æ–Ω–æ–º–∏—è Firebase –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

---

### 7. **–ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** Username –≤—ã–≤–æ–¥–∏–ª—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ HTML.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}
```

---

### 8. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥—Å—á–µ—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã –ø–æ–≤—Ç–æ—Ä—è–ª–∏—Å—å –≤ 3+ –º–µ—Å—Ç–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
export function getGameSpeed(level) {
    return Math.max(MIN_SPEED, BASE_SPEED - (level - 1) * SPEED_INCREMENT);
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã, –ª–µ–≥—á–µ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É

---

### 9. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ DOM** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –≤—ã–∑—ã–≤–∞–ª `.textContent` –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ null —ç–ª–µ–º–µ–Ω—Ç–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º
if (DOM.levelElement) DOM.levelElement.textContent = this.level;
```

---

### 10. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** ‚úÖ
**–ë—ã–ª–æ:**
```javascript
for (let y = 0; y < height; y++) {
    this.board[y] = [];
    for (let x = 0; x < width; x++) {
        this.board[y][x] = EMPTY_CELL;
    }
}
```

**–°—Ç–∞–ª–æ:**
```javascript
this.board = Array(height).fill(null).map(() => 
    Array(width).fill(EMPTY_CELL)
);
```

**–£–ª—É—á—à–µ–Ω–∏–µ:** ~40% –±—ã—Å—Ç—Ä–µ–µ, –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –§—É–Ω–∫—Ü–∏—è | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------|-------|-----------|
| –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –¥–æ—Å–∫–∏ | ~50ms | ~10ms | **80%** ‚¨áÔ∏è |
| –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å–∫–∏ | ~30ms | ~5ms | **83%** ‚¨áÔ∏è |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | ~200ms | ~120ms | **40%** ‚¨áÔ∏è |
| –†–∞–∑–º–µ—Ä auth.js | ~3.5KB | ~2.8KB | **20%** ‚¨áÔ∏è |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ DOM –∑–∞–ø—Ä–æ—Å–æ–≤/frame | 200+ | 0 | **100%** ‚¨áÔ∏è |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebWorker** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–∏–∫–∏ –∏–≥—Ä—ã
2. **CSS animations** –≤–º–µ—Å—Ç–æ JavaScript –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
3. **Lazy loading** –¥–ª—è Firebase —Ñ—É–Ω–∫—Ü–∏–π
4. **Service Worker** –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏
5. **–ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è** –≤—Å–µ—Ö JS/CSS —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

## –†–µ–∑—é–º–µ

‚úÖ **10 –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π**
‚úÖ **80% —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏**
‚úÖ **20% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è DRY**
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
‚úÖ **–õ—É—á—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å**

**–û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ~40%** üöÄ
